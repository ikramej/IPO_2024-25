<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inicio</title>
  <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  <link rel="stylesheet" href="../style/style.css">
</head>
<body>
  <div class="iphone-15">
    <div class="screen">
      <div class="dynamic-island"></div>

      <div class="top-bar">
        <input class="search-bar" placeholder="B√∫squeda üîç" />
        <div class="top-icons">
          <div class="icon-menu" onclick="toggleDropdown()">‚ò∞</div>
          <div class="icon-settings" onclick="toggleSettingsDropdown()">‚öôÔ∏è</div>
          <!-- Dropdown para vista -->
          <div id="viewDropdown" class="dropdown-menu">
            <div class="selected">Carpetas</div>
            <div>Listas</div>
        </div>

        </div>

        <!-- Dropdown -->
        <div id="dropdown" class="dropdown-menu">
          <div>Nombre</div>
          <div>Fecha ASC</div>
          <div>Fecha DESC</div>
          <div>Visitado</div>
          <div class="selected">Favoritos</div>
        </div>
      </div>
      
      <!-- Secci√≥n Estad√≠stica -->
      <div class="section">
        <div class="section-name star">Estad√≠stica</div>
        <div class="cards-row">
          <div class="card">üìÇ Tema 3.1</div>
          <div class="card">üìñ Ejercicios ‚≠ê</div>
        </div>
      </div>

      <!-- Secci√≥n Matem√°tica -->
      <div class="section">
        <div class="section-name">Matem√°tica Discreta y √Ålgebra</div>
        <div class="cards-row">
          <div class="card">üìñ Vectores</div>
          <div class="card">üìñ Tema 1</div>
        </div>
      </div>

      <div class="floating-buttons">
        <div class="circle-btn">
          <img src="../images/image 6.png" alt="Custom Circle Icon" />
        </div>
        <div class="circle-btn plus-btn">
          <span>+</span>
        </div>
      </div>

      <div class="bottom-bar">
        <a href="../templates/main.html"><iconify-icon icon="mingcute:world-2-line"></iconify-icon></a>
        <iconify-icon icon="tabler:pencil" class="active"></iconify-icon></a>
        <a href="../templates/notificaciones.html"><iconify-icon icon="bx:bell"></iconify-icon></a>
        <a href="../templates/pantallaPerfil.html"><iconify-icon icon="mingcute:user-2-line"></iconify-icon>
      </a>
    </div>
    </div>
  </div>
  <script>
    // Asignar valores aleatorios a cada card al cargar
    const cards = document.querySelectorAll(".card");
    cards.forEach(card => {
      card.dataset.fecha = Math.floor(Math.random() * 100);     // N√∫mero aleatorio (0‚Äì99)
      card.dataset.visitado = Math.floor(Math.random() * 100);  // Otro valor aleatorio
    });
  
    // Mostrar/ocultar el men√∫
    function toggleDropdown() {
      document.getElementById("dropdown").classList.toggle("active");
    }
  
    // Cierra el dropdown si haces clic fuera
    window.addEventListener('click', function (e) {
      const dropdown = document.getElementById('dropdown');
      if (!e.target.closest('.icon-menu') && !e.target.closest('.dropdown-menu')) {
        dropdown.classList.remove('active');
      }
    });
  
    // L√≥gica del filtro
    const dropdownItems = document.querySelectorAll("#dropdown div");
  
    dropdownItems.forEach(item => {
      item.addEventListener("click", () => {
        // Visual
        dropdownItems.forEach(i => i.classList.remove("selected"));
        item.classList.add("selected");
  
        document.getElementById("dropdown").classList.remove("active");
        const filter = item.textContent.trim();
  
        let sortedCards = Array.from(cards);
  
        if (filter === "Favoritos") {
          // Mostrar solo los que tienen estrella
          cards.forEach(card => {
            card.style.display = card.textContent.includes("‚≠ê") ? "block" : "none";
          });
          return;
        }
  
        // Ordenar
        if (filter === "Nombre") {
          sortedCards.sort((a, b) => a.textContent.localeCompare(b.textContent));
        } else if (filter === "Fecha ASC") {
          sortedCards.sort((a, b) => a.dataset.fecha - b.dataset.fecha);
        } else if (filter === "Fecha DESC") {
          sortedCards.sort((a, b) => b.dataset.fecha - a.dataset.fecha);
        } else if (filter === "Visitado") {
          sortedCards.sort((a, b) => b.dataset.visitado - a.dataset.visitado);
        }
  
        // Reinsertar ordenado
        const rows = document.querySelectorAll(".cards-row");
        rows.forEach(row => row.innerHTML = "");
  
        let index = 0;
        for (let row of rows) {
          for (let i = 0; i < 2 && index < sortedCards.length; i++, index++) {
            row.appendChild(sortedCards[index]);
          }
        }
      });
    });

    // Mostrar/ocultar men√∫ de configuraci√≥n
    function toggleSettingsDropdown() {
      document.getElementById("viewDropdown").classList.toggle("active");
    }

    // Cierra el dropdown si haces clic fuera
    window.addEventListener('click', function (e) {
      const settingsDropdown = document.getElementById('viewDropdown');
      const settingsIcon = document.querySelector('.icon-settings');

      if (!e.target.closest('.icon-settings') && !e.target.closest('#viewDropdown')) {
        settingsDropdown.classList.remove('active');
      }
    });

    // Manejar cambios de vista (Carpetas o Listas)
    const viewItems = document.querySelectorAll("#viewDropdown div");
    const sections = document.querySelectorAll(".section");

    viewItems.forEach(item => {
      item.addEventListener("click", () => {
        viewItems.forEach(i => i.classList.remove("selected"));
        item.classList.add("selected");
        document.getElementById("viewDropdown").classList.remove("active");

        const mode = item.textContent.trim().replace("‚úî", "");

        sections.forEach(section => {
          const row = section.querySelector(".cards-row");
          if (!row) return;

          if (mode === "Listas") {
            row.style.flexDirection = "column";
            row.querySelectorAll(".card").forEach(card => {
              card.classList.add("list-view");
            });
          } else {
            row.style.flexDirection = "row";
            row.querySelectorAll(".card").forEach(card => {
              card.classList.remove("list-view");
            });
          }

        });
      });
    });

  </script>
  
</body>
</html>
